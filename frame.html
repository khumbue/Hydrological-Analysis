<!DOCTYPE html>
<html>
<title>W3.CSS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<head>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
     google.charts.load('current', {packages: ['corechart','line']});
     google.charts.load("current", {packages:["calendar"]});
   </script>

   <script src="dataset.js">
       </script>

   <script language="Javascript">       
      var myData = JSON.parse(jsonData);
   </script>

    <script language="JavaScript">      

        function drawLineChart() {
            // Define the chart to be drawn.
            var data = new google.visualization.DataTable();
            data.addColumn('number', 'Date');
            data.addColumn('number', 'Level');  

            for(i = 0; i < 300; i++){
                data.addRows([
                [myData[i+20].Peak_Date,  myData[i+20].Peak_Level]
                ]);
            }

            // Set chart options
            var options = {'title' : 'Average Temperatures of Cities',
                hAxis: {
                title: 'Date'
                },
                vAxis: {
                title: 'Level'
                },
                'width':350,
                'height':200
            };

            // Instantiate and draw the chart.
            var chart = new google.visualization.LineChart(document.getElementById('lineChartContainer'));
            chart.draw(data, options);
        }

        google.charts.setOnLoadCallback(drawLineChart);
    </script>

    <script language="Javascript">

        var year = 0;
        var plotYear = 1999;
        var month = 0;
        var day = 0;

        function drawCalenderChart() {       
            
            var dateString;
            var dataTable = new google.visualization.DataTable();
            dataTable.addColumn({ type: 'date', id: 'Date' });
            dataTable.addColumn({ type: 'number', id: 'Won/Loss' });

            for(i = 10 ; i < myData.length; i++){

                dateString = myData[i].Peak_Date +"";
                numToDate(dateString);
                if(year.valueOf() == plotYear.valueOf()){
                    dataTable.addRows([[new Date(year,month,day),myData[i].Peak_Level]]);
                }

            }


            var chart = new google.visualization.Calendar(document.getElementById('calenderChartContainer'));

            var options = {
                title: "Peak Level",
                height: 350000000,
            };

            chart.draw(dataTable, options);
        }

        google.charts.setOnLoadCallback(drawCalenderChart);
    </script>

    <script type="text/javascript">
        function numToDate(dateString){
            year = dateString.slice(0,4);
            month = dateString.slice(4,6);
            day = dateString.slice(6,8);
        }
    </script>

    
    <script type="text/javascript">
        function updateCalenderChartSlide(yearVar){
            dateString = myData[0].Peak_Date + "";
            numToDate(dateString);
            plotYear = parseInt(yearVar) + parseInt(year)
            document.getElementById("yearText").value = plotYear;
            google.charts.setOnLoadCallback(drawCalenderChart);
        }

        function updateCalenderChartTextbox(yearVar){
            plotYear = parseInt(yearVar);
            google.charts.setOnLoadCallback(drawCalenderChart);
        }

    </script>

</head>

<body>

    Year:<input type="text" id="yearText" value="0" onchange="updateCalenderChartTextbox(this.value)">  <input type="range" min="0" max="100" step="1" oninput="updateCalenderChart(this.value)" onchange="updateCalenderChartSlide(this.value)">
    
    <br>
    <div id="lineChartContainer" style="width: 2000px;height: 140px; margin: 0 auto"></div>
    <br>
    <br>
    <br>
    <div id="calenderChartContainer" style="width: 2000px;height: 140px; margin: 0 auto"></div>

    

</body>
</html>
